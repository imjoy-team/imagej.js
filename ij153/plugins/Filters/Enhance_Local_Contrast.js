/*Compiled using CheerpJ (R) 2.1 by Leaning Technologies Ltd*/
cheerpjCL={cl:null};
var N22Enhance_Local_ContrastG;
function N22Enhance_Local_Contrast(){N4java4lang6Object.call(this);}
N22Enhance_Local_Contrast.cl=cheerpjCL;
function N22Enhance_Local_ContrastX(a){a.f=N22Enhance_Local_ContrastX;if(cheerpjSafeInitGuard('N22Enhance_Local_Contrast')) return;var q=a.q=N22Enhance_Local_Contrast.prototype=Object.create(N4java4lang6Object.prototype);q.constructor=N22Enhance_Local_Contrast;q.ifs=["ij/plugin/PlugIn"];q.dhr1ir_c79c=q.v11=_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14zd;N22Enhance_Local_Contrast.blockRadius0=0;N22Enhance_Local_Contrast.bins1=0;N22Enhance_Local_Contrast.slope2=0;a.pc=-454;_c4VLj71Ca0iq8xsazn_Z50mfbinfh7Td(a);N22Enhance_Local_ContrastG=1;cheerpjSafeInitFinish('N22Enhance_Local_Contrast');}
var N2ij2IJG;
var N2ij4UndoG;
var N2ij3gui13GenericDialogG;
var N2ij7process13ByteProcessorG;
var N4java3awt9RectangleG;
var N4java4lang6ObjectG;
var N4java4lang13StringBuilderG;
function _c4VLj71Ca0iq8xsazn_Z50mfbinXz7rd(d,p){_n4VYObjectC2E0(d,p);}function _c4VLj71Ca0iq8xsazr_Z50mfbinLlrmr94vd(p){var c=null,e=null,g=0,d=-0.;var a={p:p,pc:0,f:_c4VLj71Ca0iq8xsazr_Z50mfbinLlrmr94vd,c:null};a.pc=-142;;if((N2ij3gui13GenericDialogG|0)==0){cjG(a);};a.c=c=new N2ij3gui13GenericDialog();a.pc=-234;_c4V22ij3gui13GenericDialogC2E2(c,cheerpjInternString("Enhance Local Contrast"),null,a);e=cheerpjInternString("bloc\x6bsize : ");a.pc=-373;c.v534(c,e,(+(((N22Enhance_Local_Contrast.blockRadius0|0)<<1)+1|0)),0.,0,a);e=cheerpjInternString("histogram bins : ");a.pc=-502;c.v534(c,e,(+((N22Enhance_Local_Contrast.bins1|0)+1|0)),0.,0,a);e=cheerpjInternString("maximum slope : ");a.pc=-618;c.v534(c,e, +N22Enhance_Local_Contrast.slope2,0.,2,a);a.pc=-682;c.v629(c,cheerpjInternString("http://fiji.sc/Enhance_Local_Contrast_(CLAHE)"),a);a.pc=-773;c.v598(c,a);a.pc=-795;g=c.v580(c,a)|0;if((g|0)===0){a.pc=-835;d=+c.v582(c,a);N22Enhance_Local_Contrast.blockRadius0=((~~d-1|0)/2|0);a.pc=-915;d=+c.v582(c,a);N22Enhance_Local_Contrast.bins1=(~~d-1|0);a.pc=-982;d=+c.v582(c,a);N22Enhance_Local_Contrast.slope2=Math.fround(d);return 1|0;}return 0|0;}function _c4VLj71Ca0iq8xsazp_Z50mfbinDhr14zd(l,k,p){var c=null,g=0,d=null,e=null;var a={p:p,pc:0,f:_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14zd,c:null,d:null};a.pc=2;;a.pc=0;;if((N2ij2IJG|0)==0){cjG(a);};a.pc=1;a.c=c=_c4_02ij2IJ8getImageE132(a);a.pc=3;;a.pc=7;;cjL(c,a);a.pc=9;g=c.v16(c,a);a.pc=4;;if((g|0)!==0){a.pc=5;;a.pc=23;;if((N4java4lang13StringBuilderG|0)==0){cjG(a);};a.d=d=new N4java4lang13StringBuilder();a.pc=27;_m4FJge_YBuilderC2E0(d,a);a.pc=6;;a.pc=32;a.d=d=d.v71(d,cheerpjInternString("The image \'"),a);a.pc=8;;a.pc=36;e=c.v70(c,a);a.pc=10;;a.pc=39;e=d.v71(d,e,a);a.pc=11;;a.pc=44;e=e.v71(e,cheerpjInternString("\' is in use currently.\nPlease wait until the process is done and try again."),a);a.pc=12;;a.pc=47;e=e.v4(e,a);a.pc=13;;a.pc=51;_c4_Z2ij2IJ5errorE48(e,a);a.pc=14;;cjU(c);return ;}a.pc=15;;a.pc=16;c.v12(c,a);a.pc=17;;cjU(c);a.pc=69;g=_c4VLj71Ca0iq8xsazr_Z50mfbinLlrmr94vd(a);a.pc=18;;if((g|0)===0){a.pc=19;;a.pc=75;c.v15(c,a);a.pc=20;;return ;}a.pc=21;;a.pc=82;;if((N2ij4UndoG|0)==0){cjG(a);};a.pc=83;_c4p02ij4Undo5setupE1(6,c,a);a.pc=22;;a.pc=87;_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Dd(c,a);a.pc=24;;a.pc=90;c.v15(c,a);a.pc=25;;}function ec4VLj71Ca0iq8xsazp_Z50mfbinDhr14zd(a,b){a.f=ec4VLj71Ca0iq8xsazp_Z50mfbinDhr14zd;var c=a.c,d=a.d;var pc=a.pc;if(pc===1){}a.pc=26;;a.d=d=b;if(!((pc>=8&&pc<55)|0)){a.pc=28;;if(!((pc>=56&&pc<58)|0)){a.pc=29;;if(!((pc>=61&&pc<65)|0)){a.pc=30;;a.pc=-1;return;}}}a.pc=31;;cjU(c);a.pc=67;cheerpjThrow(a,d);a.pc=33;;}function _c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Dd(g,p){var d=0,c=0;d=N22Enhance_Local_Contrast.blockRadius0|0;c=N22Enhance_Local_Contrast.bins1|0;_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Hd(g,d,c, +N22Enhance_Local_Contrast.slope2,p);}function _c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Hd(n,m,l,k,p){var c=null,d=null;var a=new createStacklet_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Hd(p,n,m,l,k);a.pc=-145;a.c=c=n.v135(n,a);if(c===null){a.pc=-186;_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(n,m,l,k,null,null,a);}else{a.pc=-259;a.d=d=c.v24(c,a);a.pc=-286;c=c.v68(c,a);if(c===null){a.pc=-322;_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(n,m,l,k,d,null,a);}else{a.pc=-392;a.c=c=c.v213(c,0,a);a.pc=54;;if(c&&!(((N2ij7process13ByteProcessorG|0)&&c instanceof N2ij7process13ByteProcessor)>>0)){cjCastFailure(a,c);};a.pc=-542;_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(n,m,l,k,d,c,a);}}}function _c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(P,Q,R,S,T,O,p){var r=0,k=null,q=null,o=null,m=0,n=0,u=0,j=0,d=0,c=0,g=0,l=0,v=0,D=0,A=null,E=0,C=0,B=0,z=-0.,F=0,G=-0.,x=0,y=0,H=0,w=null,s=null,h=-0.,I=0,e=0,t=-0.;var a=new createStacklet_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(p,P,Q,R,S,O);a.r=r=O===null?1:0;L0:do{if(T===null){a.pc=-321;;if((N4java3awt9RectangleG|0)==0){cjG(a);};a.k=k=new N4java3awt9Rectangle();a.pc=-407;a.m=m=P.v73(P,a)|0;if(r){a.pc=-442;c=P.v74(P,a)|0;a.pc=-467;_h4V03awt9RectangleC2E3(k,0,0,m,c,a);a.r=r=1;break L0;}a.pc=-532;r=O.v13(O,a)|0;a.r=r=(r|0)<(m|0)?r|0:m|0;a.pc=-583;a.m=m=P.v74(P,a)|0;a.pc=-612;n=O.v14(O,a)|0;m=(n|0)<(m|0)?n|0:m|0;a.pc=-659;_h4V03awt9RectangleC2E3(k,0,0,r,m,a);}else{if(r){a.k=k=T;a.r=r=1;break L0;}a.k=k=T;}a.pc=-753;r=O.v13(O,a)|0;m=k.width2|0;r=(m|0)<(r|0)?m|0:r|0;k.width2=r;a.pc=-824;r=O.v14(O,a)|0;m=k.height3|0;r=(m|0)<(r|0)?m|0:r|0;k.height3=r;a.r=r=0;}while(0);a.pc=-915;c=P.v73(P,a)|0;c=c-(k.x0|0)|0;g=k.width2|0;c=(g|0)<(c|0)?g|0:c|0;k.width2=c;a.pc=-1001;c=P.v74(P,a)|0;c=c-(k.y1|0)|0;g=k.height3|0;c=(g|0)<(c|0)?g|0:c|0;k.height3=c;c=k.x0|0;a.v=v=(k.width2|0)+c|0;c=k.y1|0;a.D=D=(k.height3|0)+c|0;a.pc=-1155;a.m=m=P.v88(P,a)|0;a.pc=-1185;q=P.v59(P,a);if((m|0)===3){a.pc=-1223;a.q=q=q.v216(q,a);a.pc=-1252;o=P.v70(P,a);a.pc=-1276;P.v45(P,o,q,a);}else{a.q=q=q;}a.pc=-1317;a.m=m=P.v88(P,a)|0;a.pc=-1347;a.o=o=q.v213(q,1,a);if((m|0)===0){a.pc=-1392;a.o=o=o.v197(o,a);a.pc=239;;if(o&&!(((N2ij7process13ByteProcessorG|0)&&o instanceof N2ij7process13ByteProcessor)>>0)){cjCastFailure(a,o);};}else{a.pc=253;;if(o&&!(((N2ij7process13ByteProcessorG|0)&&o instanceof N2ij7process13ByteProcessor)>>0)){cjCastFailure(a,o);};}a.pc=-1670;a.A=A=o.v197(o,a);a.pc=263;;if(A&&!(((N2ij7process13ByteProcessorG|0)&&A instanceof N2ij7process13ByteProcessor)>>0)){cjCastFailure(a,A);};c=k.y1|0;if((c|0)<(D|0)){a.E=E=Q+1|0;a.C=C=R+1|0;a.B=B=R+2|0;a.z=z=(+(R|0));a.F=F=(R|0)>0?1:0;a.G=G=S+ -1;a.m=m=c;while(1){c=m-Q|0;a.x=x=(c|0)>0?c|0:0|0;a.pc=-1973;c=P.v74(P,a)|0;g=E+m|0;a.y=y=(g|0)<(c|0)?g|0:c|0;a.H=H=y-x|0;c=(k.x0|0)-Q|0;a.d=d=(c|0)>0?c|0:0|0;a.pc=-2082;c=P.v73(P,a)|0;c=c-1|0;g=(k.x0|0)+Q|0;a.c=c=(g|0)<(c|0)?g|0:c|0;a.w=w=new Int32Array(B);w[0]=73;a.s=s=new Int32Array(B);s[0]=73;if((y|0)>(x|0)){a.g=g=(d|0)<(c|0)?1:0;a.n=n=x;while(1){if(g){a.u=u=d;while(1){a.pc=-2299;l=o.v133(o,u,n,a)|0;h=z*((+(l|0))/255)+.5;j=~~h;if( +Math.trunc(h)!==(+(j|0))){j=cjN2I(h)|0;}l=j+1|0;w[l]=((w[l]|0)+1|0);l=u+1|0;if((l|0)<(c|0)){a.u=u=l;continue;}break;}}l=n+1|0;if((l|0)<(y|0)){a.n=n=l;continue;}break;}}l=k.x0|0;if((l|0)<(v|0)){a.I=I=(y|0)<=(x|0)?1:0;a.n=n=l;L0:while(1){a.pc=-2599;l=o.v133(o,n,m,a)|0;h=z*((+(l|0))/255)+.5;l=~~h;if( +Math.trunc(h)!==(+(l|0))){l=cjN2I(h)|0;a.u=u=l;}else{a.u=u=l;}l=n-Q|0;a.d=d=(l|0)>0?l|0:0|0;a.g=g=n+Q|0;a.l=l=g+1|0;a.pc=-2779;j=P.v73(P,a)|0;j=(l|0)<(j|0)?l|0:j|0;a.j=j=Math.imul(j-d|0,H)|0;if(r){h=(+(j|0))*S/z+.5;j=~~h;if( +Math.trunc(h)!==(+(j|0))){j=cjN2I(h)|0;a.j=j=j;}else{a.j=j=j;}}else{c=k.x0|0;a.pc=-2966;c=O.v133(O,(n-c|0),(m-(k.y1|0)|0),a)|0;h=(+(j|0))*(G*((+(c|0))/255)+1)/z+.5;j=~~h;if( +Math.trunc(h)!==(+(j|0))){j=cjN2I(h)|0;a.j=j=j;}else{a.j=j=j;}}if((d|0)>=1){a.e=e=d-1|0;if((y|0)>(x|0)){a.d=d=x;while(1){a.pc=-3185;c=o.v133(o,e,d,a)|0;h=z*((+(c|0))/255)+.5;c=~~h;if( +Math.trunc(h)!==(+(c|0))){c=cjN2I(h)|0;}c=c+1|0;w[c]=((w[c]|0)-1|0);d=d+1|0;if((d|0)<(y|0)){a.d=d=d;continue;}break;}}}a.pc=-3368;d=P.v73(P,a)|0;if(!((l|0)>(d|0)||I)){a.d=d=x;while(1){a.pc=-3433;e=o.v133(o,g,d,a)|0;h=z*((+(e|0))/255)+.5;c=~~h;if( +Math.trunc(h)!==(+(c|0))){c=cjN2I(h)|0;}e=c+1|0;w[e]=((w[e]|0)+1|0);e=d+1|0;if((e|0)<(y|0)){a.d=d=e;continue;}break;}}c=w.length-1|0;if((c|0)>=1){d=1;while(1){s[d]=w[d];d=d+1|0;if((d|0)<=(c|0))continue;break;}}d=0;while(1){g=0;c=0;while(1){if((g|0)<=(R|0)){g=g+1|0;l=(s[g]|0)-j|0;if((l|0)<1)continue;s[g]=j;c=l+c|0;continue;}break;}l=(c|0)/(C|0)|0;e=(c|0)%(C|0)|0;if((R|0)>=0){g=0;while(1){g=g+1|0;s[g]=((s[g]|0)+l|0);if((g|0)<=(R|0))continue;break;}}if((e|0)!==0){e=(R|0)/(e|0)|0;if((R|0)>=0){g=0;while(1){l=g+1|0;s[l]=((s[l]|0)+1|0);g=g+e|0;if((g|0)<=(R|0))continue;break;}}}if((c|0)!==(d|0)){d=c;continue;}if(F){c=R;d=0;while(1){e=d+1|0;j=s[e]|0;c=(j|0)===0?c|0:d|0;if((e|0)<(c|0)){d=e;continue;}break;}}else{c=R;}if((c|0)>(u|0)){d=0;}else{d=c;g=0;while(1){d=d+1|0;g=(s[d]|0)+g|0;if((d|0)<=(u|0))continue;break;}d=g;}g=u+1|0;if((g|0)>(R|0)){g=d;}else{u=d;while(1){g=g+1|0;e=(s[g]|0)+u|0;if((g|0)<=(R|0)){u=e;continue;}break;}g=e;}e=s[(c+1|0)]|0;h=(+(d-e|0))/(+(g-e|0))*255+.5;d=~~h;if( +Math.trunc(h)!==(+(d|0))){d=cjN2I(h)|0;}a.pc=-4527;A.v135(A,n,m,d,a);e=n+1|0;if((e|0)<(v|0)){a.n=n=e;continue L0;}break;}break;}}a.pc=-4616;e=P.v73(P,a)|0;a.u=u=Math.imul(e,m)|0;a.pc=-4665;e=P.v88(P,a)|0;if((e|0)===0){e=k.x0|0;if((e|0)<(v|0)){a.n=n=e;while(1){a.j=j=n+u|0;a.pc=-4759;e=A.v134(A,j,a)|0;a.pc=-4788;q.v136(q,j,e,a);e=n+1|0;if((e|0)<(v|0)){a.n=n=e;continue;}break;}}}else{a.pc=-4871;e=P.v88(P,a)|0;if((e|0)===1){a.pc=-4911;h=+q.v40(q,a);a.j=j=~~h;e=k.x0|0;if((e|0)<(v|0)){a.h=h=(+(j|0));a.n=n=e;while(1){a.c=c=n+u|0;a.pc=-5015;a.d=d=q.v134(q,c,a)|0;a.pc=-5048;a.g=g=A.v134(A,c,a)|0;a.pc=-5081;e=o.v134(o,c,a)|0;t=h+(+(d-j|0))*((+(g|0))/(+(e|0)))+.5;d=~~t;if( +Math.trunc(t)!==(+(d|0))){d=cjN2I(t)|0;}e=(d|0)<65535?d|0:65535|0;e=(e|0)>0?e|0:0|0;a.pc=-5243;q.v136(q,c,e,a);e=n+1|0;if((e|0)<(v|0)){a.n=n=e;continue;}break;}}}else{a.pc=-5326;e=P.v88(P,a)|0;if((e|0)===2){a.pc=-5366;t=+q.v40(q,a);a.h=h=Math.fround(t);e=k.x0|0;if((e|0)<(v|0)){a.n=n=e;while(1){a.j=j=n+u|0;a.pc=-5466;a.t=t=+q.v138(q,j,a);a.pc=-5498;a.d=d=A.v134(A,j,a)|0;a.pc=-5531;e=o.v134(o,j,a)|0;a.pc=-5560;q.v140(q,j,(h+(t-h)*((+(d|0))/(+(e|0)))),a);e=n+1|0;if((e|0)<(v|0)){a.n=n=e;continue;}break;}}}else{a.pc=-5671;e=P.v88(P,a)|0;if((e|0)===4){e=k.x0|0;if((e|0)<(v|0)){a.n=n=e;while(1){a.j=j=n+u|0;a.pc=-5765;a.c=c=q.v134(q,j,a)|0;a.pc=-5798;a.d=d=A.v134(A,j,a)|0;a.pc=-5831;e=o.v134(o,j,a)|0;h=(+(d|0))/(+(e|0));t=(+(c>>>16&255|0))*h+.5;d=~~t;if( +Math.trunc(t)!==(+(d|0))){d=cjN2I(t)|0;}e=(d|0)<255?d|0:255|0;e=(e|0)>0?e|0:0|0;t=(+(c>>>8&255|0))*h+.5;d=~~t;if( +Math.trunc(t)!==(+(d|0))){d=cjN2I(t)|0;}d=(d|0)<255?d|0:255|0;g=(d|0)>0?d|0:0|0;h=(+(c&255|0))*h+.5;d=~~h;if( +Math.trunc(h)!==(+(d|0))){d=cjN2I(h)|0;}d=(d|0)<255?d|0:255|0;d=(d|0)>0?d|0:0|0;a.pc=-6222;q.v136(q,j,(g<<8|e<<16|d),a);e=n+1|0;if((e|0)<(v|0)){a.n=n=e;continue;}break;}}}}}}a.pc=-6316;P.v22(P,a);e=m+1|0;if((e|0)<(D|0)){a.m=m=e;continue;}break;}}}function _c4VLj71Ca0iq8xsazA_Z50mfbinvFh5q1mK6iHmHur4Pd(g,p){var c=-0.,d=0;c=g+.5;d=~~c;if( +Math.trunc(c)!==(+(d|0))){return cjN2I(c)|0|0;}return d|0;}function _c4VLj71Ca0iq8xsazn_Z50mfbinfh7Td(p){N22Enhance_Local_Contrast.blockRadius0=63;N22Enhance_Local_Contrast.bins1=255;N22Enhance_Local_Contrast.slope2=3;}function createStacklet_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld(p,P,Q,R,S,O){this.p=p;this.pc=0;this.f=_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Ld;this.r=0;this.k=null;this.q=null;this.o=null;this.m=0;this.n=0;this.u=0;this.j=0;this.d=0;this.c=0;this.g=0;this.l=0;this.P=P;this.Q=Q|0;this.R=R|0;this.S=+S;this.O=O;this.v=0;this.D=0;this.A=null;this.E=0;this.C=0;this.B=0;this.z=-0.;this.F=0;this.G=-0.;this.x=0;this.y=0;this.H=0;this.w=null;this.s=null;this.h=-0.;this.I=0;this.e=0;this.t=-0.;}function createStacklet_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Hd(p,n,m,l,k){this.p=p;this.pc=0;this.f=_c4VLj71Ca0iq8xsazp_Z50mfbinDhr14Hd;this.n=n;this.m=m|0;this.l=l|0;this.k=+k;this.c=null;this.d=null;}